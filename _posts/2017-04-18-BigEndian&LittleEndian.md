---
layout: post
title: "大端序，小端序，网络序，主机序的爱恨情仇"
date: 2017-04-18
excerpt: "字节序真是要命啊"
tags: [字符编码, 字节序]
comments: true
---

# 字节序
字节序，又叫端序（Endianness），表示多字节数据在内存中的存放顺序。按照使用环境来区分的话，字节序被分为网络序和主机序，按照字节存放顺序来划分的话，字节序可以分为大端序和小端序。网络序其实就是一种大端序，主机序则根据硬件的不同分为大端序和小端序。

# 大端序（BE，Big-Endian）
数据在内存中按照高位字节放在内存低地址，低位字节放在内存高地址来存放的方式就叫大端序。

# 小端序（LE，Little-Endian）
与大端序正好相反，数据在内存中按照高位字节放在内存高地址，低位字节放在内存的低地址

> 大端序&小端序这两个词可能不常见，但是UTF-16 LE和UTF-16 BE应该很常见吧，这里面的LE就表示小端序，BE就表示大端序

# 网络序
网络字节序是TCP／IP协议规定的一种数据表示方式和具体的硬件或操作系统无关，以保证在不同的平台字节流都能被正确的解释。网络字节序用的就是大端序。
> 网络与主机字节转换函数:htons ntohs htonl ntohl (s 就是short l是long h是host n是network)

# 如何判断主机序是大端序还是小端序

```
int main(){
    int a = 1;
    int b = ((char*)&a)[sizeof(int) - 1];
    if(b == 1){
        //大端序
    }else{
        //小端序
    }
    return 0;
}
```

